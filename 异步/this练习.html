<!DOCTYPE html>
<html>
<head>
  <title>13</title>
  <meta charset="utf-8">
</head>
<body>
  <!-- <script type="text/javascript" src="测试.js"></script> -->
 <script type="text/javascript">

  //回调函数
// function add(num1, num2, callback){
//     var sum = num1 + num2;
//     if(sum==5)
//     callback(sum);
// }
// function print(summ){
//   console.log(summ);
// }
// add(2,3,print);
//匿名回调函数
// add(2,3,(summ)=>{
//   console.log(summ);
// })
//无参
// function my(call){
//   call();
// }
// my(()=> console.log(2))

// function print(num){
//   console.log(num);
// }
// add(1, 2, print);

//基本Promise
// var promise1 = new Promise(function (resolve,reject){
//   if(NaN==2)
//     resolve();
//   else
//     reject();
// })
// promise1.then(()=>console.log("success"),()=>console.log("fail"))

//传统回调函数
// function func(a){
//   setTimeout(()=>{
//     a();
//   },1000);
// }
// func(()=>{
//   console.log(1);
//   func(()=>{
//     console.log(2);
//     func(()=>{
//       console.log(3);
//       func(()=>{
//         console.log(4);
//         func(()=>{
//           console.log(5);
//         });
//       });
//     });
//   });
// });
// //primose
// function func2(){
//   return new Promise((resolve,reject)=>{
//     setTimeout(()=>{
//       resolve();
//     },1000);
//   });
// }
// func2().then(()=>{
//   console.log(10);
//   return func2();
// }).then(()=>{
//   console.log(20);
//   return func2();
// }).then(()=>{
//   console.log(30);
//   return func2();
// }).then(()=>{
//   console.log(40);
//   return func2();})
// })

// let myFirstPromise = new Promise(function(resolve, reject){
//     //当异步代码执行成功时，我们才会调用resolve(...), 当异步代码失败时就会调用reject(...)
//     if(3==5)
//       resolve("yes");
//     else
//       reject();
// });

// myFirstPromise.then(function(successMessage){
//     //successMessage的值是上面调用resolve(...)方法传入的值.
//     //successMessage参数不一定非要是字符串类型，这里只是举个例子
//     console.log("Yay! " + successMessage);
// },()=>{console.log('error')});

//原生ajax 异步的 JavaScript 和 XML
  // var xhr=new XMLHttpRequest();
  //   xhr.open("get",'https://www.easy-mock.com/mock/5c35a447a7a7577b357b4596/example/example#!method=get',true);
  //   xhr.send();
  //   xhr.onreadystatechange = function(){
  //   if(xhr.status===200 && xhr.readyState===4){
  //        var s = xhr.responseText;
  //        console.log(s);
  //   }else{
  //       console.log("error");
  //   }
  // }
  //promise ajax
  function getUrl(URL){
    return new Promise(function (resolve,reject){
      var request = new XMLHttpRequest();
      request.open('get','https://www.easy-mock.com/mock/5c35a447a7a7577b357b4596/example/example#!method=get',true);
      request.send();
      request.onload = function(){
        if (request.status ===200 && request.readyState===4) {
          resolve(request.responseText);
        }
        else
          reject();
      }
    })
  }
  getUrl('https://www.easy-mock.com/mock/5c35a447a7a7577b357b4596/example/example#!method=get').then((value)=>console.log(value),()=>console.log("error"));

 </script>
   <!-- <script type="text/javascript" src="测试.js"></script> -->

</body>
</html>